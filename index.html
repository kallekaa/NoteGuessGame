<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pitch Trainer</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Pitch Trainer</h1>
    <div class="header-actions">
      <button id="stats-btn" class="icon-btn" aria-label="Statistics">&#9776;</button>
      <button id="settings-btn" class="icon-btn" aria-label="Settings">&#9881;</button>
    </div>
  </header>

  <main>
    <!-- Menu Screen -->
    <section id="screen-menu" class="screen active">
      <h2>Choose a Mode</h2>
      <div class="mode-buttons">
        <button class="mode-btn" data-mode="note">
          <span class="mode-icon">&#9835;</span>
          <span class="mode-label">Note ID</span>
          <span class="mode-desc">Identify the played note</span>
        </button>
        <button class="mode-btn" data-mode="interval">
          <span class="mode-icon">&#9837;&#9839;</span>
          <span class="mode-label">Interval ID</span>
          <span class="mode-desc">Identify the interval between two notes</span>
        </button>
        <button class="mode-btn" data-mode="chord">
          <span class="mode-icon">&#9836;</span>
          <span class="mode-label">Chord ID</span>
          <span class="mode-desc">Identify the chord quality</span>
        </button>
      </div>
      <div class="menu-options">
        <div class="difficulty-selector">
          <label>Difficulty:</label>
          <div class="difficulty-buttons">
            <button class="diff-btn active" data-difficulty="easy">Easy</button>
            <button class="diff-btn" data-difficulty="medium">Medium</button>
            <button class="diff-btn" data-difficulty="hard">Hard</button>
            <button class="diff-btn" data-difficulty="adaptive">Adaptive</button>
          </div>
        </div>
        <div class="timed-toggle">
          <label for="timed-mode">
            <input type="checkbox" id="timed-mode">
            <span>Timed Challenge (60s)</span>
          </label>
        </div>
      </div>
    </section>

    <!-- Playing Screen -->
    <section id="screen-playing" class="screen">
      <div class="score-bar">
        <span id="score-display">0 / 0 (0%)</span>
        <span id="streak-display">Streak: 0 | Best: 0</span>
      </div>
      <div id="timer-bar" class="timer-bar" style="display:none;">
        <div id="timer-fill" class="timer-fill"></div>
        <span id="timer-text" class="timer-text">60</span>
      </div>
      <div class="question-area">
        <p id="question-text">What note is this?</p>
        <p id="adaptive-level" class="adaptive-level" style="display:none;"></p>
        <div id="piano-container" class="piano-container"></div>
        <div class="playback-controls">
          <button id="replay-btn" class="action-btn">&#9654; Replay<span id="replay-count"></span></button>
          <button id="hint-btn" class="action-btn hint-btn">&#10068; Hint (H)</button>
          <button id="scale-btn" class="action-btn" style="display:none;">&#9835; Scale (S)</button>
          <button id="back-to-menu-btn" class="action-btn secondary">&#8592; Menu</button>
        </div>
      </div>
      <div id="answer-grid" class="answer-grid"></div>
      <p class="hint-text">Keys: 1-9/0 answer, R replay, H hint, S scale</p>
    </section>

    <!-- Result Screen -->
    <section id="screen-result" class="screen">
      <div class="score-bar">
        <span id="result-score-display">0 / 0 (0%)</span>
        <span id="result-streak-display">Streak: 0 | Best: 0</span>
      </div>
      <div id="result-feedback" class="result-feedback">
        <p id="result-text"></p>
        <p id="result-detail"></p>
      </div>
      <div id="result-piano-container" class="piano-container"></div>
      <div id="result-answer-grid" class="answer-grid frozen"></div>
      <button id="next-btn" class="action-btn primary">Next (Space)</button>
    </section>

    <!-- Timed Result Screen -->
    <section id="screen-timed-result" class="screen">
      <div class="timed-result">
        <h2>Time's Up!</h2>
        <div class="timed-score">
          <p class="big-score" id="timed-final-score">0</p>
          <p class="score-label">correct answers</p>
        </div>
        <p id="timed-accuracy" class="timed-accuracy"></p>
        <p id="timed-best-display" class="timed-best"></p>
        <div class="timed-actions">
          <button id="timed-retry-btn" class="action-btn primary">Try Again</button>
          <button id="timed-menu-btn" class="action-btn secondary">&#8592; Menu</button>
        </div>
      </div>
    </section>

    <!-- Stats Screen -->
    <section id="screen-stats" class="screen">
      <h2>Statistics</h2>
      <div class="stats-tabs">
        <button class="stats-tab active" data-tab="overview">Overview</button>
        <button class="stats-tab" data-tab="note">Notes</button>
        <button class="stats-tab" data-tab="interval">Intervals</button>
        <button class="stats-tab" data-tab="chord">Chords</button>
      </div>
      <div id="stats-content" class="stats-content"></div>
      <button id="stats-back-btn" class="action-btn primary">&#8592; Back</button>
    </section>

    <!-- Settings Screen -->
    <section id="screen-settings" class="screen">
      <h2>Settings</h2>
      <div class="settings-form">
        <div class="setting-row">
          <label for="octave-min">Octave Range:</label>
          <div class="range-inputs">
            <select id="octave-min">
              <option value="2">2</option>
              <option value="3" selected>3</option>
              <option value="4">4</option>
            </select>
            <span>to</span>
            <select id="octave-max">
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5" selected>5</option>
              <option value="6">6</option>
            </select>
          </div>
        </div>
        <div class="setting-row">
          <label for="waveform">Waveform:</label>
          <select id="waveform">
            <option value="triangle" selected>Triangle</option>
            <option value="sine">Sine</option>
            <option value="square">Square</option>
            <option value="sawtooth">Sawtooth</option>
          </select>
        </div>
        <div class="setting-row">
          <label for="volume-slider">Volume:</label>
          <div class="volume-control">
            <input type="range" id="volume-slider" min="0" max="100" value="60">
            <span id="volume-display">60%</span>
          </div>
        </div>
        <div class="setting-row">
          <label for="ref-tone">Reference Tone (A4) before each question:</label>
          <input type="checkbox" id="ref-tone">
        </div>
        <div class="setting-row">
          <button id="reset-score-btn" class="action-btn danger">Reset Score &amp; Streak</button>
        </div>
        <div class="setting-row">
          <button id="reset-stats-btn" class="action-btn danger">Reset All Statistics</button>
        </div>
        <div class="setting-row">
          <button id="settings-back-btn" class="action-btn primary">&#8592; Back</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Countdown Overlay (used for timed mode) -->
  <div id="countdown-overlay" class="countdown-overlay" style="display:none;">
    <span id="countdown-number" class="countdown-number">3</span>
  </div>

  <script src="app.js"></script>
</body>
</html>
